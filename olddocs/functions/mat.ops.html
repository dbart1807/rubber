

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mat.ops &mdash; rage 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="rage 1.0 documentation" href="../index.html"/>
        <link rel="next" title="make matrices from microarray gffs" href="../workflows/array.2.matrix.html"/>
        <link rel="prev" title="mat.make" href="mat.make.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> rage</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div> 
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html"><em>Installation</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#bedtools">bedtools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#ucsc-kent-source-utilities">UCSC kent source utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#r-package-dependencies">R package dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#installing-the-rage-package-in-r">Installing the RAGE package in R</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="bed.avglengths.html"><em>bed.avglengths</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.avglengths.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.avglengths.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.avglengths.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.avglengths.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.avglengths.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bed.centers.html"><em>bed.centers</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.centers.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.centers.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.centers.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.centers.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.centers.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bed.coverage.html"><em>bed.coverage</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.coverage.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.coverage.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.coverage.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.coverage.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.coverage.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bed.genomecov.html"><em>bed.genomecov</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.genomecov.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.genomecov.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.genomecov.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.genomecov.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.genomecov.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bed.intersect.html"><em>bed.intersect</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.intersect.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.intersect.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.intersect.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.intersect.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.intersect.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bed.makewindows.html"><em>bed.makewindows</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.makewindows.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.makewindows.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.makewindows.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.makewindows.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.makewindows.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bed.parselengths.html"><em>bed.parselengths</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.parselengths.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.parselengths.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.parselengths.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.parselengths.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.parselengths.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bed.words.html"><em>bed.words</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bed.words.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.words.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.words.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.words.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bed.words.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bg.map.html"><em>bg.map</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="bg.map.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="bg.map.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bg.map.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="bg.map.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="bg.map.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gff.2.bg.html"><em>gff.2.bg</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="gff.2.bg.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="gff.2.bg.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="gff.2.bg.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="gff.2.bg.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="gff.2.bg.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hub.wig.html"><em>hub.wig</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="hub.wig.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="hub.wig.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="hub.wig.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="hub.wig.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="hub.wig.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mat.cor.html"><em>mat.cor</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="mat.cor.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.cor.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.cor.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.cor.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.cor.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mat.heatmap.html"><em>mat.heatmap</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="mat.heatmap.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.heatmap.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.heatmap.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.heatmap.html#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.heatmap.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mat.make.html"><em>mat.make</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="mat.make.html#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.make.html#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.make.html#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.make.html#value">value</a></li>
<li class="toctree-l2"><a class="reference internal" href="mat.make.html#examples">examples</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href=""><em>mat.ops</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#description">description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#arguments">arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output">output</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflows/array.2.matrix.html"><em>make matrices from microarray gffs</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../workflows/array.2.matrix.html#workflow">workflow</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">rage</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li><em>mat.ops</em></li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/functions/mat.ops.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="mat-ops">
<h1><em>mat.ops</em><a class="headerlink" href="#mat-ops" title="Permalink to this headline">¶</a></h1>
<p>perform calculations on matrices</p>
<div class="section" id="description">
<h2>description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">mat.ops</span></tt> can generate a matrix based on basic operations with input matrices</p>
</div>
<div class="section" id="usage">
<h2>usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mat</span><span class="o">.</span><span class="n">ops</span> <span class="p">(</span> <span class="n">matlist1</span> <span class="p">,</span> <span class="n">matlist2</span> <span class="o">=</span> <span class="n">NULL</span> <span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="n">NULL</span> <span class="p">,</span> <span class="n">outnames</span> <span class="o">=</span> <span class="n">NULL</span> <span class="p">,</span> <span class="n">replacement</span><span class="o">=</span><span class="n">NULL</span> <span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s">&quot;subtract&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="arguments">
<h2>arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Main options</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>matlist1</strong></td>
<td>a character vector of matrix file names.</td>
</tr>
<tr class="row-odd"><td><strong>matlist2</strong></td>
<td>a character vector of matrix file names.</td>
</tr>
<tr class="row-even"><td><strong>operation</strong></td>
<td>a string specifying what operation to perform. can be &#8220;log2&#8221;, &#8220;log10&#8221;, &#8220;antilog2&#8221;, &#8220;antilog10&#8221;, &#8220;ratio&#8221; , &#8220;log2ratio&#8221;, &#8220;difference&#8221;, or &#8220;mean&#8221; see &#8216;output&#8217; for details.</td>
</tr>
<tr class="row-odd"><td><strong>pattern</strong></td>
<td>a string specifying what to replace with &#8216;replacement&#8217; in matlist1 file names for the output matrices. only used when performing operations between matlist1 and matlist2 and outnames == NULL.</td>
</tr>
<tr class="row-even"><td><strong>replacement</strong></td>
<td>a string specifying what to replace &#8216;pattern&#8217; with in matlist1 file names for the output matrices. only used when performing operations between matlist1 and matlist2 and outnames == NULL.</td>
</tr>
<tr class="row-odd"><td><strong>outnames</strong></td>
<td>a character vector specifying the output matrix file names from operations between matlist1 and matlist2. only used when performing operations between matlist1 and matlist2 and pattern == replacement == NULL.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="output">
<h2>output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">mat.ops</span></tt> will generate one or more matrices from input matrices. All matrices must have identical dimensions, and operations will be performed at each cell in the matrix. There are three modes of operations.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li>matlist1 contains one matrix, and matlist2 is NULL. One of the following operations may be performed on the matrix:<ul>
<li>log2</li>
<li>log10</li>
<li>antilog2</li>
<li>antilog10</li>
<li>inverse</li>
</ul>
</li>
<li>matlist1 contains two or more matrices, and matlist2 is NULL. A string must be defined for &#8216;outnames&#8217;, but not for &#8216;pattern&#8217; and &#8216;replacement&#8217;. The &#8220;mean&#8221; may be calculated across all matrices:</li>
<li>matlist1 contains one or more matrices, and matlist2 contains the same number of matrices. Output matrices can be defined in &#8216;outnames&#8217;, or strings can be replaced in matlist1 with &#8216;pattern&#8217; and &#8216;replacement&#8217; arguments. For each matrix pair ( matlist1[1]/matlist2[1] , matlist1[2]/matlist2[2], etc ), one of the following operations may be performed, generating a matrix for each pair:<ul>
<li>log2ratio</li>
<li>ratio</li>
<li>difference</li>
<li>mean</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="examples">
<h2>examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="log2-transform-all-the-scores-in-a-matrix">
<h3>log2 transform all the scores in a matrix<a class="headerlink" href="#log2-transform-all-the-scores-in-a-matrix" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r"><div class="highlight"><pre>&gt; mat.ops ( &quot;H3K36me3_TSS.mat10 , operation = &quot;log2&quot; )
</pre></div>
</div>
</div>
<div class="section" id="produce-a-matrix-of-the-average-of-several-matrices-from-three-biological-replicates">
<h3>produce a matrix of the average of several matrices from three biological replicates<a class="headerlink" href="#produce-a-matrix-of-the-average-of-several-matrices-from-three-biological-replicates" title="Permalink to this headline">¶</a></h3>
<p>make a list of matrix file names</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> replicate_mats <span class="o">&lt;-</span> c<span class="p">(</span> <span class="s">&quot;H3K36me3-rep1_TSS.mat10&quot;</span> <span class="p">,</span> <span class="s">&quot;H3K36me3-rep2_TSS.mat10&quot;</span> <span class="p">,</span> <span class="s">&quot;H3K36me3-rep3_TSS.mat10&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>calculate an average matrix from the replicate matrices</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> mat.ops <span class="p">(</span> replicate_mats <span class="p">,</span> operation <span class="o">=</span> <span class="s">&quot;mean&quot;</span> <span class="p">,</span> outnames <span class="o">=</span> <span class="s">&quot;H3K36me3-mean_TSS.mat10&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="calculate-the-log2-ratio-of-chip-seq-matrices-versus-their-corresponding-input-matrices">
<h3>calculate the log2 ratio of ChIP-seq matrices versus their corresponding input matrices<a class="headerlink" href="#calculate-the-log2-ratio-of-chip-seq-matrices-versus-their-corresponding-input-matrices" title="Permalink to this headline">¶</a></h3>
<p>make a list of matrix file names for ChIP matrices</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> chip_mats <span class="o">&lt;-</span> c<span class="p">(</span> <span class="s">&quot;H3K36me3-IP_TSS.mat10&quot;</span> <span class="p">,</span> <span class="s">&quot;H3K27me3-IP_TSS.mat10&quot;</span> <span class="p">,</span> <span class="s">&quot;H3K9ac-IP_TSS.mat10&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>make a list of matrix file names for input matrices</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> input_mats <span class="o">&lt;-</span> c<span class="p">(</span> <span class="s">&quot;H3K36me3-input_TSS.mat10&quot;</span> <span class="p">,</span> <span class="s">&quot;H3K27me3-input_TSS.mat10&quot;</span> <span class="p">,</span> <span class="s">&quot;H3K9ac-input_TSS.mat10&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>calculate the log2 ratio of ChIP/input for each pair of matrices, reusing matlist1 names by replacing &#8216;IP&#8217; with &#8216;log2IPvsInput&#8217;.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> mat.ops <span class="p">(</span> chip_mats <span class="p">,</span> input_mats <span class="p">,</span> operation <span class="o">=</span> <span class="s">&quot;log2&quot;</span> <span class="p">,</span> pattern <span class="o">=</span> <span class="s">&quot;IP&quot;</span> <span class="p">,</span> replacement <span class="o">=</span> <span class="s">&quot;log2IPvsInput&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../workflows/array.2.matrix.html" class="btn btn-neutral float-right" title="make matrices from microarray gffs">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mat.make.html" class="btn btn-neutral" title="mat.make"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Daniel Vera.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50602521-1', 'github.com');
  ga('send', 'pageview');

</script>


</body>
</html>